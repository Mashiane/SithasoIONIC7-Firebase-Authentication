
/* sithasofirebase */
function banano_sithasofirebase_sithasofirebase() {var _B=this;_B._timestamponsnapshots=false;_B._useanalytics=false;_B._useauth=false;_B._useperformance=false;_B._usestorage=false;_B._svapidkey="";_B._firebaseconfig={};_B._firebase=null;_B._firebaseapp=null;_B._firestore=null;_B._storage=null;_B._performance=null;_B._analytics=null;_B._messaging= new banano_sithasofirebase_sithasofirebasemessaging();_B._settings={};_B._usemessaging=false;_B._auth= new banano_sithasofirebase_sithasofirebaseauth();_B._apikey="";_B._appid="";_B._authdomain="";_B._databaseurl="";_B._enablepersistence=false;_B._measurementid=false;_B._messagingsenderid="";_B._projectid="";_B._storagebucket="";_B._meventname="";_B._mcallback={};_B._usefirestore=false;_B._showlog=false;_B._dbase="";_B.initialize=function(_callback,_eventname) {if (_B._showlog) {console.log("SithasoFireBase.Initialize." + _eventname + "");}_B._meventname=_eventname.toLowerCase();_B._mcallback=_callback;_B._settings={};_B._firebaseconfig={};_B._usefirestore=false;};_B.connect=async function() {var _apps,_bconnect;if (_B._showlog) {console.log("SithasoFireBase." + _B._meventname + ".Connect");}_B._firebase=firebase;_B._firebaseconfig=eval("firebaseConfig");_B._settings={};if (_B.isconnected(_B)==false) {_B._firebaseapp=_B._firebase["initializeApp"](_B._firebaseconfig);} else {_apps=_B._firebase["apps"];_B._firebaseapp=_apps[0];}if (_B._usefirestore) {_B._settings["timestampsInSnapshots"]=_B._timestamponsnapshots;_B._firestore=_B._firebaseapp["firestore"]();_B._firestore["settings"]=_B._settings;}if (_B._usemessaging) {if (_B._messagingsenderid!="") {_B._messaging.initialize(_B._firebase,_B._svapidkey,_B._apikey);}}if (_B._useanalytics) {_B._analytics=_B._firebase["analytics"]();}if (_B._useperformance) {_B._performance=_B._firebase["performance"]();}if (_B._usestorage) {_B._storage=_B._firebase["storage"]();}if (_B._useauth) {_B._auth.initialize(_B._firebaseapp);_B._auth._showlog=_B._showlog;_B._auth.onauthstatechanged(_B,"onAuthStateChanged");}_bconnect=_B.isconnected(_B);if (_B._enablepersistence) {await _B.enablepersistencecb(_B);}if ((typeof _B._mcallback[("" + _B._meventname + "_Connected").toLowerCase()]==="function")) {(function() {if (typeof _B._mcallback[("" + _B._meventname + "_Connected").toLowerCase()]==="function") {var CSr = _B._mcallback[("" + _B._meventname + "_Connected").toLowerCase()](_bconnect,_B);if(CSr!=null) {return CSr}}})();} else {window.console.warn("SithasoFireBase." + _B._meventname + "_Connected event does not exist!");}};_B.onauthstatechanged=function(_user) {var _isauthenticated,_usr;if (_B._showlog) {console.log("SithasoFireBase.onAuthStateChanged." + _B._meventname + "");console.log(_user);}_isauthenticated=false;_usr={};if (is.null(_user) || is.undefined(_user)) {_isauthenticated=false;} else {_isauthenticated=true;_usr=_B._auth.getuserdata(_user);}_usr["authenticated"]=_isauthenticated;if ((typeof _B._mcallback[("" + _B._meventname + "_onAuthStateChanged").toLowerCase()]==="function")) {(function() {if (typeof _B._mcallback[("" + _B._meventname + "_onAuthStateChanged").toLowerCase()]==="function") {var CSr = _B._mcallback[("" + _B._meventname + "_onAuthStateChanged").toLowerCase()](_usr,_B);if(CSr!=null) {return CSr}}})();} else {window.console.warn("" + _B._meventname + "_onAuthStateChanged does not exist!");}};_B.isconnected=function() {var _apps;if (_B._showlog) {console.log("SithasoFireBase." + _B._meventname + ".IsConnected");}_apps=_B._firebase["apps"];if (_apps.length==0) {return false;} else {return true;}};_B.enablepersistencecb=function() {var _synchronizetabs,_booffline;if (_B._showlog) {console.log("SithasoFireBase." + _B._meventname + ".enablePersistence");}_synchronizetabs={"synchronizeTabs":true};_booffline=_B._firestore["enablePersistence"](_synchronizetabs);return _booffline;};_B.disablenetwork=function() {var _booffline;if (_B._showlog) {console.log("SithasoFireBase." + _B._meventname + ".disableNetwork");}_booffline=_B._firestore["disableNetwork"]();return _booffline;};_B.enablenetwork=function() {var _booffline;if (_B._showlog) {console.log("SithasoFireBase." + _B._meventname + ".enableNetwork");}_booffline=_B._firestore["enableNetwork"]();return _booffline;};_B.collection=function(_colname) {var _lbc;if (_B._showlog) {console.log("SithasoFireBase." + _B._meventname + ".collection." + _colname + "");}try {_lbc= new banano_sithasofirebase_sithasofirebasecollection();_lbc.initialize(_B._firestore,_colname);_lbc._isconnected=true;_lbc._showlog=_B._showlog;return _lbc;} catch(err) {return null;}};_B.setfirestore=function(_fs) {_B._firestore=_fs;};_B.errormessage=function(_res) {var _serror;_serror=_res["message"]===undefined? "":_res["message"];return _serror;};}function banano_sithasofirebase_sithasofirebaseauth() {var _B=this;_B._auth=null;_B._googleauthprovider=null;_B._facebookauthprovider=null;_B._twitterauthprovider=null;_B._githubauthprovider=null;_B._user= new banano_sithasofirebase_sithasofirebaseuser();_B._showlog=false;_B._recaptchaverifier=null;_B._confirmationresult=null;_B.initialize=function(_firebaseapp) {_B._auth=_firebaseapp["auth"]();_B._user=_B.createuser(_B);return _B;};_B.errormessage=function(_res) {var _serror;_serror=_res["message"]===undefined? "":_res["message"];return _serror;};_B.createuser=function() {var _usr;_usr= new banano_sithasofirebase_sithasofirebaseuser();_usr.initialize();_usr._uid="";_usr._displayname="";_usr._email="";_usr._emailverified=false;_usr._photourl="";_usr._isanonymous=false;_usr._phonenumber="";_usr._authenticated=false;_usr._refreshtoken="";return _usr;};_B.setrecaptchaverifierelement=function(_elid) {var _opt;_elid=_B.cleanid(_elid,_B);if (_B._showlog) {console.log("SithasoFireBaseAuth.SetRecaptchaVerifierElement(" + _elid + ")");}_opt={};_opt["size"]="invisible";_B._recaptchaverifier=new firebase.auth.RecaptchaVerifier(_elid,_opt);};_B.signinwithphonenumber=function(_phone) {var _si;_B._confirmationresult=null;_si=_B._auth["signInWithPhoneNumber"](_phone,_B._recaptchaverifier);return _si;};_B.confirmotp=function(_otp) {var _bp;if (_B._showlog) {console.log("SithasoFireBaseAuth.confirmOTP");}_bp=_B._confirmationresult["confirm"](_otp);return _bp;};_B.signinwithpopupgoogle=function() {var _si;if (_B._showlog) {console.log("SithasoFireBaseAuth.signInWithPopupGoogle");}_B._googleauthprovider=new firebase.auth.GoogleAuthProvider();_B._googleauthprovider["addScope"]("https://www.googleapis.com/auth/cloud-platform.read-only");_si=_B._auth["signInWithPopup"](_B._googleauthprovider);return _si;};_B.signinwithpopupfacebook=function() {var _si;if (_B._showlog) {console.log("SithasoFireBaseAuth.signInWithPopupFacebook");}_B._facebookauthprovider=new firebase.auth.FacebookAuthProvider();_si=_B._auth["signInWithPopup"](_B._facebookauthprovider);return _si;};_B.signinwithpopuptwitter=function() {var _si;if (_B._showlog) {console.log("SithasoFireBaseAuth.signInWithPopupTwitter");}_B._twitterauthprovider=new firebase.auth.TwitterAuthProvider();_si=_B._auth["signInWithPopup"](_B._twitterauthprovider);return _si;};_B.signinwithpopupgithub=function() {var _si;if (_B._showlog) {console.log("SithasoFireBaseAuth.signInWithPopupGithub");}_B._githubauthprovider=new firebase.auth.GithubAuthProvider();_si=_B._auth["signInWithPopup"](_B._githubauthprovider);return _si;};_B.signinanonymously=function() {var _si;if (_B._showlog) {console.log("SithasoFireBaseAuth.signInAnonymously");}_si=_B._auth["signInAnonymously"]();return _si;};_B.onauthstatechanged=function(_module,_methodname) {var _usr,_cb;_methodname=_methodname.toLowerCase();_usr={};_cb=function(_usr) {if (typeof _module[(_methodname).toLowerCase()]==="function") {return _module[(_methodname).toLowerCase()](_usr,_B)};};_B._auth["onAuthStateChanged"](_cb);};_B.getcurrentuser=function() {var _bouser,_usr;_bouser=_B._auth["currentUser"];if (is.null(_bouser) || is.undefined(_bouser)) { return null;}_usr=_B.getuserdata(_bouser,_B);return _usr;};_B.updateprofile=function(_sdisplayname,_sphotourl) {var _bouser,_obj;if (_B._showlog) {console.log("SithasoFireBaseAuth.updateProfile(" + _sdisplayname + "," + _sphotourl + ")");}_bouser=_B._auth["currentUser"];_obj={};_obj["displayName"]=_sdisplayname;_obj["photoURL"]=_sphotourl;_bouser["updateProfile"](_obj);return _bouser;};_B.updateemail=function(_semail) {var _bouser;if (_B._showlog) {console.log("SithasoFireBaseAuth.updateEmail(" + _semail + ")");}_bouser=_B._auth["currentUser"];_bouser["updateEmail"](_semail);return _bouser;};_B.updatepassword=function(_spassword) {var _bouser;if (_B._showlog) {console.log("SithasoFireBaseAuth.updatePassword(" + _spassword + ")");}_bouser=_B._auth["currentUser"];_bouser["updatePassword"](_spassword);return _bouser;};_B.deleteuser=function() {var _bouser;if (_B._showlog) {console.log("SithasoFireBaseAuth.deleteUser");}_bouser=_B._auth["currentUser"];_bouser["delete"]();return _bouser;};_B.getcurrentuid=function() {var _usr,_uid;_usr=_B.getcurrentuser(_B);_uid=_usr["uid"];return _uid;};_B.getuid=function(_userdata) {var _suid;_suid=_userdata["uid"];return _suid;};_B.getuser=function(_resp) {var _usr;_usr=_resp["user"];return _usr;};_B.getsignedinuserdetails=function(_usr) {var _usr1;_usr=_B.getuser(_usr,_B);_usr1=_B.getuserdata(_usr,_B);return _usr1;};_B.getuserdata=function(_usr) {var _userdata,_displayname,_email,_emailverified,_photourl,_isanonymous,_uid,_phonenumber,_refreshtoken;_B._user=_B.createuser(_B);_userdata={};if (is.null(_usr) || is.undefined(_usr)) { return _userdata;}_displayname=_usr["displayName"];_email=_usr["email"];_emailverified=_usr["emailVerified"];_photourl=_usr["photoURL"];_isanonymous=_usr["isAnonymous"];_uid=_usr["uid"];_phonenumber=_usr["phoneNumber"];_refreshtoken=_usr["refreshToken"];_userdata["displayName"]=_displayname;_userdata["email"]=_email;_userdata["emailVerified"]=_emailverified;_userdata["photoURL"]=_photourl;_userdata["isAnonymous"]=_isanonymous;_userdata["uid"]=_uid;_userdata["phoneNumber"]=_phonenumber;_userdata["refreshToken"]=_refreshtoken;_B._user._displayname=_displayname;_B._user._email=_email;_B._user._emailverified=_emailverified;_B._user._photourl=_photourl;_B._user._isanonymous=_isanonymous;_B._user._uid=_uid;_B._user._phonenumber=_phonenumber;_B._user._authenticated=true;_B._user._refreshtoken=_refreshtoken;return _userdata;};_B.createuserwithemailandpassword=function(_emailaddress,_password) {var _promregister;if (_B._showlog) {console.log("SithasoFireBaseAuth.createUserWithEmailAndPassword(" + _emailaddress + "," + _password + ")");}_promregister=_B._auth["createUserWithEmailAndPassword"](_emailaddress,_password);return _promregister;};_B.signinwithemailandpassword=function(_emailaddress,_password) {var _promregister;if (_B._showlog) {console.log("SithasoFireBaseAuth.signInWithEmailAndPassword(" + _emailaddress + "," + _password + ")");}_promregister=_B._auth["signInWithEmailAndPassword"](_emailaddress,_password);return _promregister;};_B.signout=function() {var _promregister;if (_B._showlog) {console.log("SithasoFireBaseAuth.signOut");}_promregister=_B._auth["signOut"]();return _promregister;};_B.sendpasswordresetemail=function(_email) {var _promregister;if (_B._showlog) {console.log("SithasoFireBaseAuth.sendPasswordResetEmail(" + _email + ")");}_promregister=_B._auth["sendPasswordResetEmail"](_email);return _promregister;};_B.sendemailverification=function() {var _promregister;if (_B._showlog) {console.log("SithasoFireBaseAuth.sendEmailVerification");}_promregister=_B._auth["currentUser"]["sendEmailVerification"]();return _promregister;};_B.cleanid=function(_s) {_s=_B.cstr(_s,_B);_s=_s.toLowerCase();_s=_s.split("#").join("");_s=_s.split(" ").join("");_s=_s.trim();return _s;};_B.cstr=function(_o) {if (is.null(_o) || is.undefined(_o)) {_o="";}if (_o=="null") { return "";}if (_o=="undefined") { return "";}return ""+_o;};}function banano_sithasofirebase_sithasofirebasecollection() {var _B=this;_B._isconnected=false;_B._schema={};_B._tablename="";_B._primarykey="";_B._result=[];_B._record={};_B._co=null;_B._docchangecallback={};_B._docchangemethod="";_B._getcallback={};_B._getmethod="";_B._db_string="TEXT";_B._db_int="INT";_B._db_float="FLOAT";_B._db_double="DOUBLE";_B._db_blob="BLOB";_B._db_bool="BOOL";_B._db_real="REAL";_B._db_date="DATE";_B._db_integer="INTEGER";_B._db_text="TEXT";_B._affectedrows=0;_B._response="";_B._error="";_B._auto="";_B._rowcount=0;_B._lastposition=0;_B._wherefield={};_B._ops=[];_B._orderbyl=[];_B._flds=[];_B._fb_eq="==";_B._fb_gt=">";_B._fb_ge=">=";_B._fb_lt="<";_B._fb_le="<=";_B._fb_in="in";_B._fb_nin="not-in";_B._fb_contains_any="array-contains-any";_B._fb_contains="array-contains";_B._fb_ne="ne";_B._fb_asc="asc";_B._fb_desc="desc";_B._fb_added="added";_B._fb_modified="modified";_B._fb_removed="removed";_B._firestore=null;_B._firesql=null;_B._strings=[];_B._integers=[];_B._blobs=[];_B._doubles=[];_B._booleans=[];_B._multiselect=[];_B._schemafields=[];_B._showlog=false;_B._displayvalue="";_B._displayfield="";_B._success=false;_B._singular="";_B._plural="";_B._combinel=[];_B.initialize=function(_fb,_colname) {_B._firestore=_fb;_B._co=_fb["collection"](_colname);_B._tablename=_colname;_B.reset(_B);return _B;};_B.setschemafromdatamodel=function(_models) {var _tm,_fldsx,_fm;if ((_B._tablename in _models)==false) {throw "SetSchemaFromDataModel." + _B._tablename + " data-model does NOT exist!";return;}_tm=_models[_B._tablename];_B._schema={};_B._strings.length=0;_B._integers.length=0;_B._blobs.length=0;_B._doubles.length=0;_B._booleans.length=0;_fldsx=_tm._fields;for (var _fmindex=0;_fmindex<_fldsx.length;_fmindex++) {_fm=_fldsx[_fmindex];switch ("" + _fm._fieldtype) {case "" + "TEXT":_B.schemaaddtext1(_fm._fieldname,_B);break;case "" + "BLOB":_B.schemaaddblob1(_fm._fieldname,_B);break;case "" + "INT":_B.schemaaddint1(_fm._fieldname,_B);break;case "" + "DOUBLE":_B.schemaadddouble1(_fm._fieldname,_B);break;case "" + "BOOL":_B.schemaaddboolean1(_fm._fieldname,_B);break;}}};_B.query=async function(_firesqlx,_qry) {var _promget;if (_B._showlog) {console.log("SithasoFireBase.query." + _qry + "");}_B._result.length=0;_promget=_firesqlx["query"](_qry);_B._result=await _promget;_B._affectedrows=_B._result.length;_B._response="Success";_B._error="";_B._success=true;_B._rowcount=_B._result.length;return _B._result;};_B.schemaaddfield=function(_fldname,_fldtype) {_B._schema[_fldname]=_fldtype;};_B.schemaclear=function() {_B._schema={};_B._strings.length=0;_B._integers.length=0;_B._blobs.length=0;_B._doubles.length=0;_B._schemafields.length=0;_B._booleans.length=0;};_B.schemaaddboolean=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_bool;_B._booleans.push(_b);_B._schemafields.push(_b);}};_B.schemaaddint=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_int;_B._integers.push(_b);_B._schemafields.push(_b);}};_B.schemaadddouble=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_double;_B._doubles.push(_b);_B._schemafields.push(_b);}};_B.schemaaddfloat=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_float;_B._doubles.push(_b);_B._schemafields.push(_b);}};_B.schemaaddblob=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_blob;_B._blobs.push(_b);_B._schemafields.push(_b);}};_B.schemaaddtext=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_string;_B._strings.push(_b);_B._schemafields.push(_b);}};_B.subscribe=function(_module) {var _docx,_cb;_B._docchangecallback=_module;_B._docchangemethod=_B._tablename+"_change";_docx={};_cb=function(_docx) {if (typeof _B[("onSnapshotx").toLowerCase()]==="function") {return _B[("onSnapshotx").toLowerCase()](_docx,_B)};};_B._co["onSnapshot"](_cb);};_B.onsnapshotx=function(_querysnapshot) {var _changes,_recx,_stype,_docx,_rdata,_uid;_changes=_querysnapshot["docChanges"]();for (var _recxindex=0;_recxindex<_changes.length;_recxindex++) {_recx=_changes[_recxindex];_stype=_recx["type"];_docx=_recx["doc"];_rdata=_docx["data"]();_uid=_docx["id"];_rdata["id"]=_uid;(function() {if (typeof _B._docchangecallback[(_B._docchangemethod).toLowerCase()]==="function") {var CSr = _B._docchangecallback[(_B._docchangemethod).toLowerCase()](_stype,_rdata,_B);if(CSr!=null) {return CSr}}})();}};_B.create=async function() {var _docref,_bpadd,_res;if (_B._showlog) {console.log("SithasoFireBaseCollection.CREATE");}if (Object.keys(_B._schema).length==0) {throw "SithasoFireBaseCollection.CREATE. Please execute SchemaAdd?? first to define your table schema!";return null;}try {_docref={};_bpadd=_B._co["add"](_B._record);_docref=await _bpadd;_res=_B.getid(_docref,_B);return _res;} catch(err) {return "";}};_B.containskey=async function(_key) {var _docx,_bexist;if (_B._showlog) {console.log("SithasoFireBaseCollection.ContainsKey." + _key + "");}_docx= new banano_sithasofirebase_sithasofirebasedocument();_docx.initialize(_B._co,_key);_bexist=await _docx.existswait();return _bexist;};_B.delete_all=async function() {var _keys,_k,_d;if (_B._showlog) {console.log("SithasoFireBaseCollection.DeleteAll");}_keys=await _B.listkeys(_B);for (var _kindex=0;_kindex<_keys.length;_kindex++) {_k=_keys[_kindex];_d=_B.doc(_k,_B);await _d.deletewait();}};_B.delete_by=function(_fldname,_fldvalue) {if (_B._showlog) {console.log("SithasoFireBaseCollection.DELETE_BY(" + _fldname + "," + _fldvalue + ")");}_B.clear_where(_B);_B.add_where(_fldname,"=",_fldvalue,_B);_B.deletewhere("id",_B._wherefield,_B._ops,_B);};_B.delete_by_string=function(_fldname,_fldvalue) {if (_B._showlog) {console.log("SithasoFireBaseCollection.DELETE_BY_STRING(" + _fldname + "," + _fldvalue + ")");}_B.clear_where(_B);_B.add_where(_fldname,"=","'" + _fldvalue + "'",_B);_B.deletewhere("id",_B._wherefield,_B._ops,_B);};_B.delete=async function(_id) {var _d,_r;if (_B._showlog) {console.log("SithasoFireBaseCollection.DELETE(" + _id + ")");}if (Object.keys(_B._schema).length==0) {throw "SithasoFireBaseCollection.DELETE. Please execute SchemaAdd?? first to define your table schema!";return false;}try {_d=_B.doc(_B._primarykey,_B);_r=await _d.deletewait();if (_r=="") { return false;}return true;} catch(err) {return false;}};_B.findwhere=async function(_wheremap,_whereops) {var _sflds,_oflds;_sflds=_B._schema;_oflds=[];_oflds.length=0;return await _B.selectwhere(_sflds,_wheremap,_whereops,_oflds,_B);};_B.findwhereorderby=async function(_fields,_wheremap,_whereops,_orderbyx) {return await _B.selectwhere(_fields,_wheremap,_whereops,_orderbyx,_B);};_B.getid=function(_xresponse) {var _res;if (("id" in _xresponse)) {_res=_xresponse["id"];return _res;} else if (("message" in _xresponse)) {_res=_xresponse["message"];_res="error."+_res;return _res;}};_B.doc=function(_pv) {var _docx;_docx= new banano_sithasofirebase_sithasofirebasedocument();_docx.initialize(_B._co,_pv);return _docx;};_B.orderby=function(_fld,_ordertype) {_B._co=_B._co["orderBy"](_fld,_ordertype);return _B;};_B.limit=function(_ilimit) {_B._co=_B._co["limit"](_ilimit);return _B;};_B.get=function() {var _promget;_promget=_B._co["get"]();return _promget;};_B.startat=function(_ilimit) {_B._co=_B._co["startAt"](_ilimit);return _B;};_B.endat=function(_ilimit) {_B._co=_B._co["endAt"](_ilimit);return _B;};_B.where=function(_fld,_oper,_value) {switch ("" + _oper) {case "" + "=":_oper=_B._fb_eq;break;case "" + "<>":_oper=_B._fb_ne;break;case "" + ">":_oper=_B._fb_gt;break;case "" + "<":_oper=_B._fb_lt;break;case "" + ">=":_oper=_B._fb_ge;break;case "" + "<=":_oper=_B._fb_le;break;case "" + "in":_oper=_B._fb_in;break;case "" + "notin":_oper=_B._fb_nin;break;case "" + "contains":_oper=_B._fb_contains;break;case "" + "contains_any":_oper=_B._fb_contains_any;break;}switch ("" + _oper) {case "" + "ne":_B._co=_B._co["where"](_fld,"<",_value);_B._co=_B._co["where"](_fld,">",_value);break;default:_B._co=_B._co["where"](_fld,_oper,_value);break;}return _B;};_B.mergewait=async function(_sprimarykey,_rec) {var _d,_r;_d=_B.doc(_sprimarykey,_B);_r=await _d.setmergewait(_rec);return _r;};_B.get_id_by_field=async function(_fldname,_fldvalue) {var _rec,_sid;if (_B._showlog) {console.log("SDUIPocketBase.GET_ID_BY_FIELD(" + _fldname + "," + _fldvalue + ")");}_rec=await _B.read_by_string(_fldname,_fldvalue,_B);_sid=_rec["id"]===undefined? "":_rec["id"];return _sid;};_B.update_by_string=async function(_fldname,_fldvalue) {var _rec,_sid,_nid;if (_B._showlog) {console.log("SDUIPocketBase.UPDATE_BY_STRING(" + _fldname + "," + _fldvalue + ")");}_rec=await _B.read_by_string(_fldname,_fldvalue,_B);_sid=_rec["id"]===undefined? "":_rec["id"];_B._record["id"]=_sid;_nid=await _B.update(_B);return _nid;};_B.update_by=async function(_fldname,_fldvalue) {var _rec,_sid,_nid;if (_B._showlog) {console.log("SDUIPocketBase.UPDATE_BY(" + _fldname + "," + _fldvalue + ")");}_rec=await _B.read_by(_fldname,_fldvalue,_B);_sid=_rec["id"]===undefined? "":_rec["id"];_B._record["id"]=_sid;_nid=await _B.update(_B);return _nid;};_B.update=async function() {var _id,_d,_r;if (_B._showlog) {console.log("SithasoPocketBaseCollection.UPDATE");}if (Object.keys(_B._schema).length==0) {throw "SithasoPocketBaseCollection.UPDATE. Please execute SchemaAdd?? first to define your table schema!";return null;}try {_id=_B._record["id"];_d=_B.doc(_id,_B);_r=await _d.updatewait(_B._record);return _r;} catch(err) {return "";}};_B.read=async function(_id) {var _m,_d;if (_B._showlog) {console.log("SithasoPocketBaseCollection.READ(" + _id + ")");}if (Object.keys(_B._schema).length==0) {throw "SithasoPocketBaseCollection.READ. Please execute SchemaAdd?? first to define your table schema!";return null;}_m={};try {_d=_B.doc(_id,_B);_m=await _d.getwait();_B._record=_m;return _m;} catch(err) {_B._record=_m;return _m;}};_B.read_by_string=async function(_fldname,_fldvalue) {var _res,_m;if (_B._showlog) {console.log("SithasoPocketBaseCollection.READ_BY_STRING(" + _fldname + "," + _fldvalue + ")");}_B.clear_where(_B);_B.add_where_string(_fldname,"=",_fldvalue,_B);_res=await _B.select_where(_B);_m={};if (_res.length==0) {return _m;} else {_m=_res[0];return _m;}};_B.read_by=async function(_fldname,_fldvalue) {var _res,_m;if (_B._showlog) {console.log("SithasoPocketBaseCollection.READ_BY(" + _fldname + "," + _fldvalue + ")");}_B.clear_where(_B);_B.add_where(_fldname,"=",_fldvalue,_B);_res=await _B.select_where(_B);_m={};if (_res.length==0) {return _m;} else {_m=_res[0];return _m;}};_B.add_where_string=function(_fld,_operator,_value) {if (_B._showlog) {console.log("SithasoPocketBaseCollection.ADD_WHERE_STRING(" + _fld + "," + _operator + "," + _value + ")");}_B.add_where(_fld,_operator,"'" + _value + "'",_B);return _B;};_B.clear_where=function() {if (_B._showlog) {console.log("SithasoFireBase.CLEAR_WHERE");}_B._wherefield={};_B._ops.length=0;_B._orderbyl.length=0;_B._flds.length=0;_B._combinel.length=0;return _B;};_B.add_field=function(_fld) {_B._flds.push(_fld);return _B;};_B.add_fields=function(_fields) {var _fld;for (var _fldindex=0;_fldindex<_fields.length;_fldindex++) {_fld=_fields[_fldindex];_B.add_field(_fld,_B);}return _B;};_B.add_where=function(_fld,_operator,_value) {_B._wherefield[_fld]=_value;_B._ops.push(_operator);_B._combinel.push("AND");return _B;};_B.add_order_by=function(_fld) {_B._orderbyl.push(_fld);return _B;};_B.add_order_by_desc=function(_fld) {if (_B._showlog) {console.log("SithasoFireBaseCollection.ADD_ORDER_BY_DESC(" + _fld + ")");}_B._orderbyl.push("" + _fld + " DESC");return _B;};_B.where_or=function(_pos) {if (_B._showlog) {console.log("SithasoFirebaseCollection.WHERE_OR(" + _pos + ")");}_B._combinel[_pos]="OR";return _B;};_B.where_and=function(_pos) {if (_B._showlog) {console.log("SithasoFirebaseCollection.WHERE_AND(" + _pos + ")");}_B._combinel[_pos]="AND";return _B;};_B.recordfrommap=function(_sm) {var _k,_v;_B._record={};var _kKeys = Object.keys(_sm);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_sm[_k];_B._record[_k]=_v;}};_B.nextrow=function() {var _realsize;_B._lastposition=_B._lastposition+1;_realsize=_B._rowcount-1;if (_B._lastposition>_realsize) {return false;} else {_B.setposition(_B._lastposition,_B);return true;}};_B.preparerecord=function() {_B._record={};};_B.setposition=function(_pos) {if (_B._result.length>_pos) {_B._record=_B._result[_pos];_B._lastposition=_pos;} else {_B._lastposition=-1;_B._record={};}};_B.reset=function() {_B._success=false;_B._combinel.length=0;_B._result.length=0;_B._primarykey="id";_B._strings.length=0;_B._integers.length=0;_B._blobs.length=0;_B._doubles.length=0;_B._multiselect.length=0;_B._schemafields.length=0;_B._isconnected=false;_B._showlog=false;_B._record={};_B._response="";_B._error="";_B._affectedrows=0;_B._lastposition=-1;_B._rowcount=0;_B._wherefield={};_B._ops.length=0;_B._orderbyl.length=0;_B._flds.length=0;_B._success=false;_B._schema={};_B._displayfield="";_B._singular="";_B._plural="";_B._displayvalue="";_B.schemaaddtext1("id",_B);};_B.getposition=function() {return _B._lastposition;};_B.getint=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return 0;}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? 0:_B._record[_fld];_obj=_B.cint(_obj,_B);return _obj;} else {return 0;}};_B.getlong=function(_fld) {return _B.getint(_fld,_B);};_B.getstring=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return "";}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? "":_B._record[_fld];_obj=_B.cstr(_obj,_B);return _obj;} else {return "";}};_B.getboolean=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return false;}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? false:_B._record[_fld];_obj=_B.cbool(_obj,_B);return _obj;} else {return false;}};_B.getdouble=function(_fld) {var _obj;_fld=_fld.toLowerCase();if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? 0:_B._record[_fld];_obj=_B.cdbl(_obj,_B);return _obj;} else {return 0;}};_B.getrecord=function(_pos) {var _rec;_rec=_B._result[_pos];return _rec;};_B.movenext=function() {_B._lastposition=_B._lastposition+1;if (_B._lastposition>_B._rowcount) {_B._lastposition=_B._rowcount-1;}_B.setposition(_B._lastposition,_B);};_B.schemaaddblob1=function(_b) {_B._schema[_b]=_B._db_blob;_B._blobs.push(_b);_B._schemafields.push(_b);return _B;};_B.schemaaddboolean1=function(_b) {_B._schema[_b]=_B._db_bool;return _B;};_B.schemaadddouble1=function(_b) {_B._schema[_b]=_B._db_double;_B._doubles.push(_b);_B._schemafields.push(_b);return _B;};_B.schemaaddfloat1=function(_b) {_B._schema[_b]=_B._db_float;_B._doubles.push(_b);_B._schemafields.push(_b);return _B;};_B.schemaaddtext1=function(_b) {_B._schema[_b]=_B._db_string;_B._strings.push(_b);_B._schemafields.push(_b);return _B;};_B.schemaaddint1=function(_b) {_B._schema[_b]=_B._db_int;_B._integers.push(_b);_B._schemafields.push(_b);return _B;};_B.firstrecord=function() {var _rec;_rec=_B._result[0];return _rec;};_B.correctdatatypessave=function(_rec) {var _fld,_c,_a,_b,_v;for (var _fldindex=0;_fldindex<_B._integers.length;_fldindex++) {_fld=_B._integers[_fldindex];if (_B._multiselect.indexOf(_fld)>=0) {if ((_fld in _rec)) {_c=[];_c.length=0;_a=_rec[_fld]===undefined? _c:_rec[_fld];_b=_B.join(",",_a,_B);_rec[_fld]=_b;}continue;}_v=_rec[_fld]===undefined? 0:_rec[_fld];if (is.boolean(_v)) {_v=_B.cbool(_v,_B);if (_v==true) {_rec[_fld]=1;} else {_rec[_fld]=0;}} else {if (is.null(_v) || is.undefined(_v)) {_v=0;}_v=parseInt(_v);if (_B.isnan(_v,_B)) {_v=0;}_rec[_fld]=_v;}}for (var _fldindex=0;_fldindex<_B._doubles.length;_fldindex++) {_fld=_B._doubles[_fldindex];if (_B._multiselect.indexOf(_fld)>=0) {if ((_fld in _rec)) {_c=[];_c.length=0;_a=_rec[_fld]===undefined? _c:_rec[_fld];_b=_B.join(",",_a,_B);_rec[_fld]=_b;}continue;}_v=_rec[_fld]===undefined? 0:_rec[_fld];if (is.null(_v) || is.undefined(_v)) {_v=0;}_v=parseFloat(_v);if (_B.isnan(_v,_B)) {_v=0;}_rec[_fld]=_v;}for (var _fldindex=0;_fldindex<_B._strings.length;_fldindex++) {_fld=_B._strings[_fldindex];if (_B._multiselect.indexOf(_fld)>=0) {if ((_fld in _rec)) {_c=[];_c.length=0;_a=_rec[_fld]===undefined? _c:_rec[_fld];_b=_B.join(",",_a,_B);_rec[_fld]=_b;}continue;}_v=_rec[_fld]===undefined? "":_rec[_fld];if (is.null(_v) || is.undefined(_v)) {_v="";}_v=_B.cstr(_v,_B);_rec[_fld]=_v;}};_B.firestorebuildwhere=function() {var _sb,_i,_iwhere,_col,_cval,_opr,_com,_qfilter,_afilter;_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_i=0;_iwhere=Object.keys(_B._wherefield).length-1;for (_i=0;_i<=_iwhere;_i++) {_col=banano_getB4JKeyAt(_B._wherefield,_i);_col=_col.split("&").join("");_cval=banano_getB4JValueAt(_B._wherefield,_i);_opr=_B._ops[_i];_com=_B._combinel[_i];_sb.append(_col);_sb.append(" " + _opr + " ");_sb.append(_cval);_sb.append(" " + _com + " ");}_qfilter=_sb.toString();console.log("'" + _qfilter + "'");_afilter=_B.remdelim(_qfilter," " + _com + " ",_B);_qfilter=_afilter.trim();return _qfilter;};_B.errormessage=function(_res) {var _serror;_serror=_res["message"]===undefined? "":_res["message"];return _serror;};_B.select_where=async function() {return await _B.selectwhere(_B._flds,_B._wherefield,_B._ops,_B._orderbyl,_B);};_B.selectwhere=async function(_tblfields,_tblwhere,_operators,_orderbyx) {var _xfields,_xsort,_xqry,_strwhere;if (Object.keys(_B._schema).length==0) {console.log("SithasoFireBaseCollection.SelectWhere: '" + _B._tablename + "' schema is not set!");}_B._wherefield=_tblwhere;_B._ops=_operators;_B.listremoveitem(_tblfields,"id",_B);_xfields=_tblfields.join(",");_xsort=_orderbyx.join(",");if (_xfields!="") {_xqry="SELECT __name__ AS " + _B._primarykey + ", " + _xfields + " FROM " + _B._tablename + "";} else {_xqry="SELECT __name__ AS " + _B._primarykey + " FROM " + _B._tablename + "";}if (Object.keys(_tblwhere).length>0) {_strwhere=_B.firestorebuildwhere(_B);_xqry=_xqry+" WHERE "+_strwhere+" ";}if (_xsort!="") {_xqry="" + _xqry + " ORDER BY " + _xsort + "";}_xqry=_xqry.trim();if (_B._showlog) {console.log("SithasoFireBase.SelectWhere." + _xqry + "");}_B._firesql=new FireSQL(_B._firestore);await _B.query(_B._firesql,_xqry,_B);return _B._result;};_B.select_all=function() {if (_B._showlog) {console.log("SithasoFireBaseCollection.SELECT_ALL");}if (Object.keys(_B._schema).length==0) {throw "SithasoFireBaseCollection.SELECT_ALL. Please execute SchemaAdd?? first to define your table schema!";return null;}_B.clear_where(_B);_B._lastposition=-1;_B._result.length=0;_B._result=_B.selectwhere(_B._schemafields,_B._wherefield,_B._ops,_B._orderbyl,_B);_B._rowcount=_B._result.length;return _B._result;};_B.selectwherewait=async function() {await _B.selectwhere(_B._flds,_B._wherefield,_B._ops,_B._orderbyl,_B);};_B.listkeys=async function() {var _xqry,_thekeys;if (_B._showlog) {console.log("SithasoFireBaseCollection.ListKeys." + _B._tablename + "");}_xqry="SELECT __name__ AS " + _B._primarykey + " FROM " + _B._tablename + "";_B._firesql=new FireSQL(_B._firestore);_thekeys=await _B.query(_B._firesql,_xqry,_B);return _thekeys;};_B.listkeyswhere=async function(_tblwhere,_operators) {var _xqry,_strwhere,_res;if (_B._showlog) {console.log("SithasoFireBase.ListKeysWhere." + _B._tablename + "");}_B._wherefield=_tblwhere;_B._ops=_operators;_xqry="SELECT __name__ AS " + _B._primarykey + " FROM " + _B._tablename + "";if (Object.keys(_tblwhere).length>0) {_strwhere=_B.firestorebuildwhere(_B);_xqry=_xqry+" WHERE "+_strwhere+" ";}_xqry=_xqry.trim();if (_B._showlog) {console.log("SithasoFireBaseCollection.ListKeysWhere." + _xqry + "");}_B._firesql=new FireSQL(_B._firestore);_res=await _B.query(_B._firesql,_xqry,_B);return _res;};_B.deletewhere=async function(_sprimarykey,_wheremap,_whereops) {var _recs,_rec,_pvalue,_d;if (_B._showlog) {console.log("SithasoFireBaseCollection.DeleteWhere." + _B._tablename + "");}_recs=await _B.listkeyswhere(_wheremap,_whereops,_B);for (var _recindex=0;_recindex<_recs.length;_recindex++) {_rec=_recs[_recindex];_pvalue=_rec[_sprimarykey];_d=_B.doc(_pvalue,_B);await _d.deletewait();}return true;};_B.cint=function(_o) {_o=_B.val(_o,_B);return parseInt(_o);};_B.isnan=function(_obj) {var _res;_res=window["isNaN"](_obj);return _res;};_B.val=function(_value) {var _sout,_mout,_slen,_i;_value=_B.cstr(_value,_B);_value=_value.trim();if (_value=="") {_value="0";}if (_B.isnan(_value,_B)) {_value="0";}try {_sout="";_mout="";_slen=_value.length;_i=0;for (_i=0;_i<=_slen-1;_i++) {_mout=_value.charAt(_i);if (_B.instr("0123456789.-",_mout,_B)!=-1) {_sout=_sout+_mout;}}return _sout;} catch(err) {return _value;}};_B.cstr=function(_o) {if (is.null(_o) || is.undefined(_o)) {_o="";}if (_o=="null") { return "";}if (_o=="undefined") { return "";}return ""+_o;};_B.join=function(_delimiter,_lst) {var _i,_sbx,_fld,_sout;if (_lst.length==0) { return "";}_i=0;_sbx=new StringBuilder();_fld="";_sbx.init();_sbx.isinitialized=true;_fld=_lst[0];_sbx.append(_fld);for (_i=1;_i<=_lst.length-1;_i++) {_fld=_lst[_i];_sbx.append(_delimiter).append(_fld);}_sout=_sbx.toString();_sout=_sout.trim();return _sout;};_B.instr=function(_stext,_sfind) {return _stext.toLowerCase().indexOf(_sfind.toLowerCase());};_B.cbool=function(_v) {var _s;if (is.null(_v) || is.undefined(_v)) {_v=false;}if (typeof _v=="string" || typeof _v=="object") {_s=_v+"";_s=_s.toLowerCase();if (_s=="") { return false;}if (_s=="false") { return false;}if (_s=="true") { return true;}if (_s=="1") { return true;}if (_s=="y") { return true;}if (_s=="0") { return false;}if (_s=="n") { return false;}if (_s=="no") { return false;}if (_s=="yes") { return true;}}return _v;};_B.cdbl=function(_o) {var _out,_nvalue,_nout;_o=_B.val(_o,_B);_out=BANano_nf(BANano_r(_o, 2),0);_nvalue=_B.cstr(_out,_B);_nvalue=_nvalue.split(",").join(".");_nvalue=_B.val(_nvalue,_B);_nout=parseFloat(_nvalue);return _nout;};_B.listremoveitem=function(_lst,_itm) {var _idx;_idx=_lst.indexOf(_itm);if (_idx!=-1) {_lst.splice(_idx,1);}return _lst;};_B.create_or_update=async function() {var _key,_bthere,_k;if (_B._showlog) {console.log("SithasoFireBaseCollection.CREATE_OR_UPDATE");}if (Object.keys(_B._schema).length==0) {throw "SithasoFireBaseCollection.CREATE_OR_UPDATE. Please execute SchemaAdd?? first to define your table schema!";return "";}try {_key=_B._record["id"]===undefined? "":_B._record["id"];_B._displayvalue=_B._record[_B._displayfield]===undefined? "":_B._record[_B._displayfield];_bthere=false;if (_key!="") {_bthere=await _B.containskey(_key,_B);if (_B._showlog) {console.log("SithasoFireBaseCollection.CREATE_OR_UPDATE:ContainsKey(id," + _key + "," + _bthere + ")");}}if (_bthere==false) {_k=await _B.create(_B);return _k;} else {_k=await _B.update(_B);return _k;}} catch(err) {return "";}};_B.setfield=function(_fldname,_fldvalue) {var _dt;if (_B._showlog) {console.log("SithasoPocketBaseCollection.SetField(" + _fldname + ", " + _fldvalue + ")");}_dt=_B._schema[_fldname];switch ("" + _dt) {case "" + _B._db_bool:_fldvalue=_B.cbool(_fldvalue,_B);break;case "" + _B._db_int:_fldvalue=_B.cint(_fldvalue,_B);break;case "" + _B._db_string:_fldvalue=_B.cstr(_fldvalue,_B);break;case "" + _B._db_real:_fldvalue=_B.cdbl(_fldvalue,_B);break;case "" + _B._db_blob:break;case "" + _B._db_float:_fldvalue=_B.cdbl(_fldvalue,_B);break;case "" + _B._db_integer:_fldvalue=_B.cint(_fldvalue,_B);break;case "" + _B._db_text:_fldvalue=_B.cstr(_fldvalue,_B);break;case "" + _B._db_double:_fldvalue=_B.cdbl(_fldvalue,_B);break;}_B._record[_fldname]=_fldvalue;return _B;};_B.create_or_update_by_field=async function(_fldname) {var _skey,_bthere,_id,_rec,_k;if (_B._showlog) {console.log("SithasoFireBaseCollection.CREATE_OR_UPDATE_BY_FIELD(" + _fldname + ")");}if (Object.keys(_B._schema).length==0) {throw "SithasoFireBaseCollection.CREATE_OR_UPDATE_BY_FIELD. Please execute SchemaAdd?? first to define your table schema!";return "";}try {_skey=_B._record[_fldname]===undefined? "":_B._record[_fldname];_B._displayvalue=_B._record[_B._displayfield]===undefined? "":_B._record[_B._displayfield];_bthere=false;_id="";if (_skey!="") {_rec=await _B.read_by_string(_fldname,_skey,_B);_id=_rec["id"]===undefined? "":_rec["id"];if (_id!="") {_bthere=true;}}if (_bthere==false) {_k=await _B.create(_B);return _k;} else {_k=await _B.update(_B);return _k;}} catch(err) {return "";}};_B.setrecord=function(_rec) {var _k,_fldpos,_v,_dt;_B._record={};var _kKeys = Object.keys(_rec);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_fldpos=(_k in _B._schema);if (_fldpos==false) {delete _rec[_k];}}var _kKeys = Object.keys(_rec);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_rec[_k]===undefined? "":_rec[_k];_dt=_B._schema[_k];switch ("" + _dt) {case "" + _B._db_bool:_v=_B.cbool(_v,_B);break;case "" + _B._db_int:_v=_B.cint(_v,_B);break;case "" + _B._db_string:_v=_B.cstr(_v,_B);break;case "" + _B._db_real:_v=_B.cdbl(_v,_B);break;case "" + _B._db_blob:break;case "" + _B._db_float:_v=_B.cdbl(_v,_B);break;case "" + _B._db_integer:_v=_B.cint(_v,_B);break;case "" + _B._db_text:_v=_B.cstr(_v,_B);break;case "" + _B._db_double:_v=_B.cdbl(_v,_B);break;}_B._record[_k]=_v;}_B._displayvalue=_B._record[_B._displayfield]===undefined? "":_B._record[_B._displayfield];if (_B._showlog) {console.log("SithasoFireBaseCollection.SetRecord(" + JSON.stringify(_B._record) + ")");}};_B.getimage=function(_fld) {var _simage;_simage=_B.getstring(_fld,_B);if (_simage=="") { return "./assets/placeholderimg.jpg";}return _simage;};_B.movefirst=function() {_B.setposition(0,_B);};_B.movelast=function() {_B.setposition(_B._rowcount-1,_B);};_B.moveprevious=function() {_B._lastposition=_B._lastposition-1;if (_B._lastposition<0) {_B._lastposition=0;}_B.setposition(_B._lastposition,_B);};_B.existsbystring=async function(_fldname,_fldvalue) {var _res;if (_B._showlog) {console.log("SithasoFireBaseCollection.ExistsByString(" + _fldname + "," + _fldvalue + ")");}_B.clear_where(_B);_B.add_where_string(_fldname,"=",_fldvalue,_B);_res=await _B.select_where(_B);if (_res.length==0) {return false;} else {return true;}};_B.exists=async function(_fldname,_fldvalue) {var _res;if (_B._showlog) {console.log("SithasoFireBaseCollection.Exists(" + _fldname + "," + _fldvalue + ")");}_B.clear_where(_B);_B.add_where(_fldname,"=",_fldvalue,_B);_res=await _B.select_where(_B);if (_res.length==0) {return false;} else {return true;}};_B.existswhere=async function(_wherex) {var _k,_v,_res;if (_B._showlog) {console.log("SithasoFireBaseCollection.ExistsWhere(" + JSON.stringify(_wherex) + ")");}_B.clear_where(_B);var _kKeys = Object.keys(_wherex);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_wherex[_k];_B.add_where_string(_k,"=",_v,_B);}_res=await _B.select_where(_B);if (_res.length==0) {return false;} else {return true;}};_B.setrecordasis=function(_rec) {var _k,_v;_B._record={};var _kKeys = Object.keys(_rec);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_rec[_k];_B._record[_k]=_v;}_B._displayvalue=_B._record[_B._displayfield]===undefined? "":_B._record[_B._displayfield];if (_B._showlog) {console.log("SithasoFireBaseCollection.SetRecordAsIs(" + JSON.stringify(_B._record) + ")");}};_B.getkeyvalues=async function(_bhasnothing,_k,_v) {var _mx,_row,_f1,_f2;if (_B._showlog) {console.log("SithasoFireBaseCollection.GetKeyValues(" + _bhasnothing + "," + _k + "," + _v + ")");}_mx={};if (_bhasnothing) {_mx[""]="-- Nothing Selected --";}_B.clear_where(_B);_B.add_field(_k,_B);_B.add_field(_v,_B);_B.add_order_by(_v,_B);_B._result=await _B.select_where(_B);for (var _rowindex=0;_rowindex<_B._result.length;_rowindex++) {_row=_B._result[_rowindex];_f1=_row[_k];_f2=_row[_v];_mx[_f1]=_f2;}return _mx;};_B.getkeyvaluesfromlist=function(_source,_bhasnothing,_k,_v) {var _mx,_row,_f1,_f2;_mx={};if (_bhasnothing) {_mx[""]="-- Nothing Selected --";}for (var _rowindex=0;_rowindex<_source.length;_rowindex++) {_row=_source[_rowindex];_f1=_row[_k];_f2=_row[_v];_mx[_f1]=_f2;}return _mx;};_B.remdelim=function(_svalue,_delim) {var _sw,_ldelim,_nvalue;_sw=_svalue.endsWith(_delim);if (_sw) {_ldelim=_delim.length;_nvalue=_svalue;_sw=_nvalue.endsWith(_delim);if (_sw) {_nvalue=_nvalue.substring(0,_nvalue.length-_ldelim);}return _nvalue;} else {return _svalue;}};}function banano_sithasofirebase_sithasofirebasedocument() {var _B=this;_B._doc=null;_B._docchangecallback={};_B._docchangemethod="";_B.initialize=function(_co,_pv) {_B._doc=_co["doc"](_pv);return _B;};_B.onsnapshot=function(_module,_methodname) {var _docx,_cb;_B._docchangecallback=_module;_B._docchangemethod=_methodname;_docx={};_cb=function(_docx) {if (typeof _B[("onSnapshotx").toLowerCase()]==="function") {return _B[("onSnapshotx").toLowerCase()](_docx,_B)};};_B._doc["onSnapshot"](_cb);};_B.onsnapshotx=function(_docx) {var _rdata,_uid;_rdata=_docx["data"]();_uid=_docx["id"];_rdata["id"]=_uid;(function() {if (typeof _B._docchangecallback[(_B._docchangemethod).toLowerCase()]==="function") {var CSr = _B._docchangecallback[(_B._docchangemethod).toLowerCase()](_rdata,_B);if(CSr!=null) {return CSr}}})();};_B.update=function(_record) {var _promadd;_promadd=_B._doc["update"](_record);return _promadd;};_B.delete=function() {var _promdel;_promdel=_B._doc["delete"]();return _promdel;};_B.set=function(_record) {var _promset;_promset=_B._doc["set"](_record);return _promset;};_B.setmerge=function(_record) {var _m,_promset;_m={};_m["merge"]=true;_promset=_B._doc["set"](_record,_m);return _promset;};_B.get=function() {var _promget;_promget=_B._doc["get"]();return _promget;};_B.getwait=async function() {var _docx,_bpget,_bexists,_uid,_udata,_m;_docx=null;_bpget=null;_bpget=_B.get(_B);_docx=await _bpget;_bexists=_docx["exists"];if (_bexists) {_uid=_docx["id"];_udata=_docx["data"]();_udata["id"]=_uid;return _udata;} else {_m={};return _m;}};_B.existswait=async function() {var _docx,_bpget,_bexists;_docx=null;_bpget=null;_bpget=_B.get(_B);_docx=await _bpget;_bexists=_docx["exists"];return _bexists;};_B.setwait=async function(_record) {var _docref,_bpadd;_docref={};_bpadd=null;_bpadd=_B.set(_record,_B);_docref=await _bpadd;if (is.null(_docref) || is.undefined(_docref)) {return true;} else {return false;}};_B.setmergewait=async function(_record) {var _docref,_bpadd;_docref={};_bpadd=null;_bpadd=_B.setmerge(_record,_B);_docref=await _bpadd;if (is.null(_docref) || is.undefined(_docref)) {return true;} else {return false;}};_B.updatewait=async function(_record) {var _docref,_bpadd,_res;_docref={};_bpadd=null;_bpadd=_B.update(_record,_B);_docref=await _bpadd;if (is.null(_docref) || is.undefined(_docref)) {return "";} else {_res=_B.getid(_docref,_B);return _res;}};_B.deletewait=async function() {var _docref,_bpadd,_res;_docref={};_bpadd=null;_bpadd=_B.delete(_B);_docref=await _bpadd;if (is.null(_docref) || is.undefined(_docref)) {return "";} else {_res=_B.getid(_docref,_B);return _res;}};_B.getid=function(_response) {var _res;if (("id" in _response)) {_res=_response["id"];return _res;} else if (("message" in _response)) {_res=_response["message"];_res="error."+_res;return _res;} else {return "";}};}function banano_sithasofirebase_sithasofirebasemessaging() {var _B=this;_B._messaging=null;_B._key="";_B._mtoken="";_B._mserverkey="";_B.initialize=function(_fb,_vapidkey,_sk) {_B._messaging=_fb["messaging"]();_B._key=_vapidkey;_B._mtoken="";_B._mserverkey=_sk;return _B;};_B.issubscribed=function(_response) {if ((_response.status<200 || _response.status>=400)) {return false;} else {return true;}};_B.issent=function(_response) {if ((_response.status<200 || _response.status>=400)) {return false;} else {return true;}};_B.requestpermission=function() {var _rp;_rp=_B._messaging["requestPermission"]();return _rp;};_B.gettoken=function() {var _opt,_t;_opt={};_opt["vapidKey"]=_B._key;_t=_B._messaging["getToken"](_opt);return _t;};_B.deletetoken=function() {var _dt;_dt=_B._messaging["deleteToken"](_B._mtoken);return _dt;};_B.deletetokenandwait=async function() {var _done,_fetchp;_done=false;_fetchp=null;_fetchp=_B.deletetoken(_B);_done=await _fetchp;return _done;};_B.settoken=function(_vartoken) {_B._mtoken=_vartoken;};_B.onmessage=function(_module,_methodname) {var _payload,_cb;_methodname=_methodname.toLowerCase();_payload={};_cb=function(_payload) {if (typeof _module[(_methodname).toLowerCase()]==="function") {return _module[(_methodname).toLowerCase()](_payload,_B)};};_B._messaging["onMessage"](_cb);};_B.ontokenrefresh=function(_module,_methodname) {var _cb;_methodname=_methodname.toLowerCase();_cb=function() {if (typeof _module[(_methodname).toLowerCase()]==="function") {return _module[(_methodname).toLowerCase()](_B)};};_B._messaging["onTokenRefresh"](_cb);};_B.sendtotoken=function(_stoken,_stitle,_smessage,_sdata,_sicon) {var _options,_hdrs,_notif,_body,_fetch;_options={};_options={};_options.method="POST";_options.mode="cors";_hdrs={};_hdrs["Content-Type"]="application/json;";_hdrs["Authorization"]="key="+_B._mserverkey;_options.headers=_hdrs;_notif={};_notif["title"]=_stitle;_notif["body"]=_smessage;_notif["icon"]=_sicon;_body={};_body["to"]=_stoken;_body["notification"]=_notif;_body["data"]=_sdata;_options.body=JSON.stringify(_body);_fetch={};_fetch=fetch("https://fcm.googleapis.com/fcm/send",_options);return _fetch;};_B.sendtotokenandwait=async function(_stoken,_stitle,_smessage,_sdata,_sicon) {var _smessageid,_response,_fetch,_res;_smessageid="";_response={};_fetch={};_fetch=_B.sendtotoken(_stoken,_stitle,_smessage,_sdata,_sicon,_B);_response=await _fetch;_res=await _response.json();if (_response.ok) {_smessageid=_res["message_id"];}return _smessageid;};_B.sendtotopic=function(_stopic,_stitle,_smessage,_sdata,_sicon) {var _options,_hdrs,_notif,_body,_fetch;_options={};_options={};_options.method="POST";_options.mode="cors";_hdrs={};_hdrs["Content-Type"]="application/json;";_hdrs["Authorization"]="key="+_B._mserverkey;_options.headers=_hdrs;_notif={};_notif["title"]=_stitle;_notif["body"]=_smessage;_notif["icon"]=_sicon;_body={};_body["to"]="/topics/" + _stopic + "";_body["data"]=_sdata;_body["notification"]=_notif;_options.body=JSON.stringify(_body);_fetch={};_fetch=fetch("https://fcm.googleapis.com/fcm/send",_options);return _fetch;};_B.sendtotopicandwait=async function(_stopic,_stitle,_smessage,_sdata,_sicon) {var _smessageid,_response,_fetch,_res;_smessageid="";_response={};_fetch={};_fetch=_B.sendtotopic(_stopic,_stitle,_smessage,_sdata,_sicon,_B);_response=await _fetch;_res=await _response.json();if (_response.ok) {_smessageid=_res["message_id"];}return _smessageid;};_B.validatetoken=function() {var _fetch,_options,_hdrs,_xfetch;_fetch={};_options={};_options={};_options.method="GET";_options.mode="cors";_hdrs={};_hdrs["Content-Type"]="application/json;";_hdrs["Authorization"]="key="+_B._mserverkey;_options.headers=_hdrs;_xfetch="https://iid.googleapis.com/iid/info/" + _B._mtoken + "";_fetch=fetch(_xfetch,_options);return _fetch;};_B.validatetokenandwait=async function() {var _done,_fetch;_done=false;_fetch={};_fetch=_B.validatetoken(_B);_done=await _fetch;return _done;};_B.subscribe=function(_stopic) {var _fetch,_options,_hdrs,_xfetch;_fetch={};_stopic=_stopic.trim();if (_stopic=="") { return _fetch;}_options={};_options={};_options.method="POST";_options.mode="cors";_hdrs={};_hdrs["Content-Type"]="application/json;";_hdrs["Authorization"]="key="+_B._mserverkey;_options.headers=_hdrs;_xfetch="https://iid.googleapis.com/iid/v1/" + _B._mtoken + "/rel/topics/" + _stopic + "";_fetch=fetch(_xfetch,_options);return _fetch;};_B.subscribeandwait=async function(_stopic) {var _done,_fetch;_done=false;_fetch={};_fetch=_B.subscribe(_stopic,_B);_done=await _fetch;return _done;};_B.unsubscribeandwait=async function(_stopic) {var _done,_fetch;_done=false;_fetch={};_fetch=_B.unsubscribe(_stopic,_B);_done=await _fetch;return _done;};_B.unsubscribe=function(_stopic) {var _fetch,_options,_hdrs,_xfetch;_fetch={};_stopic=_stopic.trim();if (_stopic=="") { return _fetch;}_options={};_options={};_options.method="DELETE";_options.mode="cors";_hdrs={};_hdrs["Content-Type"]="application/json;";_hdrs["Authorization"]="key="+_B._mserverkey;_options.headers=_hdrs;_xfetch="https://iid.googleapis.com/iid/v1/" + _B._mtoken + "/rel/topics/" + _stopic + "";_fetch=fetch(_xfetch,_options);return _fetch;};_B.createtopic=function(_stopic) {var _fetch,_options,_body,_hdrs;_fetch={};_stopic=_stopic.trim();if (_stopic=="") { return _fetch;}_options={};_options={};_options.method="POST";_options.mode="cors";_body={};_body["to"]="/topics/" + _stopic + "";_body["registration_tokens"]=[_B._mtoken];_options.body=JSON.stringify(_body);_hdrs={};_hdrs["Content-Type"]="application/json;";_hdrs["Authorization"]="key="+_B._mserverkey;_options.headers=_hdrs;_fetch=fetch("https://iid.googleapis.com/iid/v1:batchAdd",_options);return _fetch;};_B.createtopicandwait=async function(_stopic) {var _done,_fetch;_done=false;_fetch={};_fetch=_B.createtopic(_stopic,_B);_done=await _fetch;return _done;};_B.removetopic=function(_stopic) {var _fetch,_options,_body,_hdrs;_fetch={};_stopic=_stopic.trim();if (_stopic=="") { return _fetch;}_options={};_options={};_options.method="POST";_options.mode="cors";_body={};_body["to"]="/topics/" + _stopic + "";_body["registration_tokens"]=[_B._mtoken];_options.body=JSON.stringify(_body);_hdrs={};_hdrs["Content-Type"]="application/json;";_hdrs["Authorization"]="key="+_B._mserverkey;_options.headers=_hdrs;_fetch=fetch("https://iid.googleapis.com/iid/v1:batchRemove",_options);return _fetch;};_B.removetopicandwait=async function(_stopic) {var _done,_fetch;_done=false;_fetch={};_fetch=_B.removetopic(_stopic,_B);_done=await _fetch;return _done;};_B.getsubscriptions=function() {var _options,_hdrs,_xfetch,_fetch;_options={};_options={};_options.method="GET";_options.mode="cors";_hdrs={};_hdrs["Content-Type"]="application/json;";_hdrs["Authorization"]="key="+_B._mserverkey;_options.headers=_hdrs;_xfetch="https://iid.googleapis.com/iid/info/" + _B._mtoken + "?details=true";_fetch={};_fetch=fetch(_xfetch,_options);return _fetch;};_B.subscribetotopicsandwait=async function(_topics) {var _fetches,_strtopic,_fetch,_resultsall;_fetches=[];_fetches.length=0;for (var _strtopicindex=0;_strtopicindex<_topics.length;_strtopicindex++) {_strtopic=_topics[_strtopicindex];_fetch=_B.subscribe(_strtopic,_B);_fetches.push(_fetch);}_resultsall=[];_resultsall=await Promise.all(_fetches);return true;};_B.getsubscriptionsandwait=async function() {var _topicsm,_response,_fetch,_res,_rel;_topicsm={};_response={};_fetch={};_fetch=_B.getsubscriptions(_B);_response=await _fetch;_res=await _response.json();_rel=_res["rel"];_topicsm=_rel["topics"];return _topicsm;};_B.gettokenandwait=async function() {var _token,_fetch;_token="";_fetch={};_fetch=_B.gettoken(_B);_token=await _fetch;return _token;};}function banano_sithasofirebase_sithasofirebasestorage() {var _B=this;_B._ref=null;_B.initialize=function(_storage,_refname) {_B._ref=_storage["ref"](_refname);return _B;};_B.put=function(_fo) {var _ppromise;_ppromise=_B._ref["put"](_fo);return _ppromise;};_B.putwait=async function(_record) {var _docref,_bpadd;_docref="";_bpadd=null;_bpadd=_B.put(_record,_B);_docref=await _bpadd;return _docref;};}